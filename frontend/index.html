<!doctype html>
<html lang="pt-BR" class="dark">
  <head>
    <meta charset="UTF-8" />
    <script>
      // Polyfills básicos para compatibilidade (sem require que quebra o app)
      window.global = window;
      window.module = { exports: {} };
      window.exports = window.module.exports;
      window.process = { env: {} };
      
      // Fix para MediaSession API errors - intercepta ANTES de qualquer código executar
      // Função segura para registrar ações de mídia
      const safeSetActionHandler = (action, handler) => {
        try {
          if ('mediaSession' in navigator && 'setActionHandler' in navigator.mediaSession) {
            navigator.mediaSession.setActionHandler(action, handler);
          }
        } catch (error) {
          // Ignora silenciosamente erros de suporte a ações específicas
          // Isso previne o erro "The provided value... is not a valid enum value"
          console.warn(`MediaSession action "${action}" not supported:`, error.message || error);
        }
      };
      
      // Substituir o setActionHandler original por uma versão segura
      if ('mediaSession' in navigator && 'setActionHandler' in navigator.mediaSession) {
        const originalSetActionHandler = navigator.mediaSession.setActionHandler.bind(navigator.mediaSession);
        navigator.mediaSession.setActionHandler = function(action, handler) {
          safeSetActionHandler(action, handler);
        };
      }
      
      // Handler global para capturar erros não tratados (incluindo autoPip.js de extensões)
      window.addEventListener('error', function(event) {
        // Captura erros de MediaSession e autoPip.js (pode vir de extensões do navegador)
        if (event.message && (
          event.message.includes('setActionHandler') ||
          event.message.includes('enterpictureinpicture') ||
          (event.filename && event.filename.includes('autoPip.js'))
        )) {
          event.preventDefault();
          console.warn('Erro de MediaSession capturado e silenciado:', event.message);
          return true;
        }
      }, true);
      
      // Handler para Promise rejections não tratadas
      window.addEventListener('unhandledrejection', function(event) {
        if (event.reason && (
          event.reason.message && (
            event.reason.message.includes('setActionHandler') ||
            event.reason.message.includes('enterpictureinpicture')
          )
        )) {
          event.preventDefault();
          console.warn('Promise rejection de MediaSession capturada e silenciada:', event.reason);
        }
      });
    </script>
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- SEO Meta Tags -->
    <title>Let's Roll - Plataforma de RPG de Mesa Online</title>
    <meta name="description" content="Plataforma completa para jogar RPG de mesa online. Sistema Ordem Paranormal, fichas de personagem, dados virtuais e muito mais." />
    <meta name="keywords" content="RPG, RPG de mesa, Ordem Paranormal, D&D, dados virtuais, campanha RPG" />
    <meta name="author" content="Let's Roll Team" />
    <meta name="theme-color" content="#8000FF" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Let's Roll - Plataforma de RPG de Mesa Online" />
    <meta property="og:description" content="Plataforma completa para jogar RPG de mesa online. Sistema Ordem Paranormal, fichas de personagem, dados virtuais e muito mais." />
    <meta property="og:site_name" content="Let's Roll" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Let's Roll - Plataforma de RPG de Mesa Online" />
    <meta name="twitter:description" content="Plataforma completa para jogar RPG de mesa online. Sistema Ordem Paranormal, fichas de personagem, dados virtuais e muito mais." />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- PWA Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png" />
    <link rel="apple-touch-icon" href="/icon-192.png" />
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Let's Roll" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

